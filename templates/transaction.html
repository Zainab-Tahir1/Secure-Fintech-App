{% extends "base.html" %}

{% block title %}New Transaction - Secure FinTech App{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h4><i class="bi bi-cash-coin"></i> Create New Transaction</h4>
            </div>
            <div class="card-body p-4">
                <form method="POST" action="{{ url_for('transaction') }}" id="transactionForm">
                    <div class="mb-3">
                        <label for="transaction_type" class="form-label">Transaction Type *</label>
                        <select class="form-select" id="transaction_type" name="transaction_type" required>
                            <option value="">Select transaction type...</option>
                            <option value="deposit">Deposit</option>
                            <option value="withdrawal">Withdrawal</option>
                            <option value="transfer">Transfer</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="amount" class="form-label">Amount *</label>
                        <div class="input-group">
                            <span class="input-group-text">$</span>
                            <input type="number" class="form-control" id="amount" name="amount" 
                                   required min="0.01" max="1000000" step="0.01"
                                   placeholder="0.00">
                        </div>
                        <div class="form-text">Enter amount between $0.01 and $1,000,000.00</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" name="description" 
                                  rows="3" maxlength="500"
                                  placeholder="Enter transaction description (optional)"></textarea>
                        <div class="form-text">This information will be encrypted and stored securely</div>
                    </div>
                    
                    <div class="alert alert-warning">
                        <i class="bi bi-shield-lock-fill"></i> 
                        <strong>Security Note:</strong> Your transaction description will be encrypted before storage.
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-check-circle"></i> Create Transaction
                        </button>
                        <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left"></i> Back to Dashboard
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.getElementById('amount').addEventListener('input', function() {
        const amount = parseFloat(this.value);
        if (isNaN(amount)) {
            this.setCustomValidity('Please enter a valid number');
        } else if (amount <= 0) {
            this.setCustomValidity('Amount must be greater than 0');
        } else if (amount > 1000000) {
            this.setCustomValidity('Amount cannot exceed $1,000,000');
        } else {
            this.setCustomValidity('');
        }
    });
</script>
{% endblock %}